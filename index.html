
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Infografía: Evolución del Parlamentarismo Británico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --ink: #0b1020;
        --paper: #f7f4ef;
        --mist: #eef1f5;
        --accent: #f05a28;
        --accent-2: #2f80ed;
        --accent-3: #16a34a;
        --line: rgba(11, 16, 32, 0.15);
        --glass: rgba(255, 255, 255, 0.7);
        --shadow: 0 12px 35px rgba(11, 16, 32, 0.12);
      }
      * {
        box-sizing: border-box;
      }
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: "Space Grotesk", sans-serif;
        color: var(--ink);
        background: radial-gradient(
            1000px 600px at 10% -10%,
            rgba(240, 90, 40, 0.18),
            transparent 60%
          ),
          radial-gradient(
            800px 500px at 90% 0%,
            rgba(47, 128, 237, 0.18),
            transparent 60%
          ),
          linear-gradient(180deg, #f7f4ef 0%, #edf1f7 100%);
        min-height: 100vh;
      }
      body::before {
        content: "";
        position: fixed;
        inset: -20%;
        background: radial-gradient(
            60rem 60rem at 12% 12%,
            rgba(240, 90, 40, 0.14),
            transparent 60%
          ),
          radial-gradient(
            50rem 50rem at 88% 18%,
            rgba(47, 128, 237, 0.14),
            transparent 60%
          ),
          radial-gradient(
            45rem 45rem at 40% 90%,
            rgba(22, 163, 74, 0.12),
            transparent 65%
          );
        z-index: -1;
        animation: floatGlow 28s ease-in-out infinite;
        pointer-events: none;
      }
      h1,
      h2,
      h3,
      h4 {
        font-family: "Source Serif 4", serif;
        letter-spacing: 0.2px;
      }
      .hero {
        position: relative;
        overflow: hidden;
        border-bottom: 1px solid var(--line);
        background: linear-gradient(
          120deg,
          rgba(11, 16, 32, 0.9),
          rgba(11, 16, 32, 0.7)
        );
        color: white;
      }
      .hero::after {
        content: "";
        position: absolute;
        inset: 0;
        background: url("./images/1689.jpg") center / cover;
        mix-blend-mode: soft-light;
        opacity: 0.9;
      }
      .hero-content {
        position: relative;
        z-index: 1;
      }
      .halo {
        position: absolute;
        inset: -30% 0 auto;
        height: 140%;
        background: radial-gradient(
          600px 600px at 30% 40%,
          rgba(240, 90, 40, 0.4),
          transparent 60%
        );
        opacity: 0.6;
        filter: blur(30px);
      }
      .nav-glass {
        backdrop-filter: blur(16px);
        background: rgba(247, 244, 239, 0.85);
        border-bottom: 1px solid var(--line);
      }
      .nav-link {
        position: relative;
        transition: color 0.2s ease;
      }
      .nav-link.active {
        color: var(--accent);
        font-weight: 600;
        text-decoration: underline;
        text-underline-offset: 6px;
      }
      .nav-link.active::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        bottom: -6px;
        height: 3px;
        background: var(--accent);
        border-radius: 999px;
        animation: navPulse 2.6s ease-in-out infinite;
      }
      .section-card {
        background: var(--glass);
        border: 1px solid rgba(11, 16, 32, 0.08);
        box-shadow: var(--shadow);
        border-radius: 24px;
        padding: 2rem;
        position: relative;
        overflow: hidden;
        transform-style: preserve-3d;
      }
      .section-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.8),
          transparent 65%
        );
        opacity: 0;
        transition: opacity 0.4s ease;
      }
      .section-card:hover::before {
        opacity: 1;
      }
      .section-card:hover {
        transform: translateY(-3px);
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.35rem 0.9rem;
        border-radius: 999px;
        background: rgba(240, 90, 40, 0.12);
        color: var(--accent);
        font-weight: 600;
        letter-spacing: 0.3px;
        text-transform: uppercase;
        font-size: 0.75rem;
      }
      .grid-hero {
        display: grid;
        gap: 2rem;
        grid-template-columns: 1.1fr 0.9fr;
      }
      .stat-card {
        border: 1px solid rgba(255, 255, 255, 0.15);
        background: rgba(255, 255, 255, 0.08);
        border-radius: 18px;
        padding: 1.25rem;
        display: grid;
        gap: 0.5rem;
        backdrop-filter: blur(10px);
      }
      .stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: #ffd36a;
      }
      .chart-wrap {
        background: white;
        border-radius: 16px;
        padding: 1rem;
        border: 1px solid rgba(11, 16, 32, 0.08);
        position: relative;
        overflow: hidden;
      }
      .chart-wrap::after {
        content: "";
        position: absolute;
        inset: auto -20% -50% -20%;
        height: 60%;
        background: radial-gradient(
          240px 140px at 50% 0%,
          rgba(47, 128, 237, 0.18),
          transparent 70%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }
      .chart-wrap:hover::after {
        opacity: 1;
      }
      .chart-wrap canvas {
        width: 100% !important;
        height: 260px !important;
      }
      .timeline {
        position: relative;
        display: grid;
        gap: 1.5rem;
      }
      .timeline::before {
        content: "";
        position: absolute;
        left: 22px;
        top: 0;
        bottom: 0;
        width: 2px;
        background: linear-gradient(
          180deg,
          rgba(240, 90, 40, 0.4),
          rgba(47, 128, 237, 0.4)
        );
      }
      .timeline-item {
        display: grid;
        grid-template-columns: 48px 1fr;
        gap: 1.2rem;
        position: relative;
      }
      .timeline-dot {
        width: 16px;
        height: 16px;
        border-radius: 999px;
        background: white;
        border: 3px solid var(--accent);
        margin-left: 15px;
        box-shadow: 0 0 0 6px rgba(240, 90, 40, 0.12);
      }
      .timeline-card {
        background: white;
        border-radius: 18px;
        padding: 1.25rem;
        border: 1px solid rgba(11, 16, 32, 0.08);
        box-shadow: 0 10px 24px rgba(11, 16, 32, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        transform-style: preserve-3d;
      }
      .timeline-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 16px 30px rgba(11, 16, 32, 0.12);
      }
      .timeline-image {
        width: 100%;
        max-width: 140px;
        height: 100px;
        object-fit: cover;
        border-radius: 12px;
        border: 1px solid rgba(11, 16, 32, 0.08);
      }
      .flow-grid {
        display: grid;
        gap: 1rem;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      }
      .flow-card {
        background: white;
        border-radius: 14px;
        padding: 1rem;
        border: 1px solid rgba(11, 16, 32, 0.08);
        box-shadow: 0 8px 20px rgba(11, 16, 32, 0.08);
        transition: transform 0.3s ease;
        transform-style: preserve-3d;
      }
      .flow-card:hover {
        transform: translateY(-4px);
      }
      .glow {
        position: absolute;
        inset: auto -10% -40% -10%;
        height: 50%;
        background: radial-gradient(
          400px 200px at 50% 0%,
          rgba(47, 128, 237, 0.3),
          transparent 70%
        );
        filter: blur(40px);
        opacity: 0.6;
      }
      .reveal {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease, transform 0.6s ease;
      }
      .reveal.is-visible {
        opacity: 1;
        transform: translateY(0);
      }
      .tilt-card {
        transition: transform 0.2s ease;
        will-change: transform;
      }
      .scroll-progress {
        position: absolute;
        left: 0;
        bottom: 0;
        height: 3px;
        width: 0%;
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
      }
      @keyframes floatGlow {
        0% {
          transform: translate3d(0, 0, 0);
        }
        50% {
          transform: translate3d(-2%, 2%, 0);
        }
        100% {
          transform: translate3d(0, 0, 0);
        }
      }
      @keyframes navPulse {
        0%,
        100% {
          transform: scaleX(1);
          opacity: 1;
        }
        50% {
          transform: scaleX(0.7);
          opacity: 0.55;
        }
      }
      @media (max-width: 960px) {
        .grid-hero {
          grid-template-columns: 1fr;
        }
      }
      @media (prefers-reduced-motion: reduce) {
        html {
          scroll-behavior: auto;
        }
        .reveal,
        .reveal.is-visible {
          transition: none;
          opacity: 1;
          transform: none;
        }
        body::before {
          animation: none;
        }
        .tilt-card {
          transition: none;
          transform: none;
        }
        .nav-link.active::after {
          animation: none;
        }
      }
    </style>
  </head>
  <body class="leading-relaxed">
    <header class="hero">
      <div class="halo"></div>
      <div class="container mx-auto px-6 py-16 hero-content">
        <div class="grid-hero">
          <div>
            <span class="pill">Infografía histórica</span>
            <h1 class="text-4xl md:text-6xl font-semibold mt-4">
              La Evolución del Parlamentarismo Británico
            </h1>
            <p class="mt-4 text-lg text-gray-200 max-w-2xl">
              Un viaje visual desde Cromwell hasta el siglo XXI, trazando
              reformas, crisis y el legado global del modelo Westminster.
            </p>
          </div>
          <div class="grid gap-4">
            <div class="stat-card">
              <p class="text-sm uppercase tracking-widest text-gray-200">
                Hitos principales
              </p>
              <div class="stat-number" data-count="6">0</div>
              <p class="text-gray-100 text-sm">
                Reformas clave y transformaciones institucionales.
              </p>
            </div>
            <div class="stat-card">
              <p class="text-sm uppercase tracking-widest text-gray-200">
                Siglos cubiertos
              </p>
              <div class="stat-number" data-count="5">0</div>
              <p class="text-gray-100 text-sm">
                De la Guerra Civil a la era digital.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="glow"></div>
    </header>

    <nav id="sticky-nav" class="sticky top-0 z-50 nav-glass">
      <div class="scroll-progress" id="scroll-progress"></div>
      <div class="container mx-auto px-4">
        <ul class="flex flex-wrap justify-center gap-6 py-4 text-sm font-medium">
          <li><a class="nav-link" href="#introduccion">Introducción</a></li>
          <li><a class="nav-link" href="#siglo-xvii-xviii">S. XVII-XVIII</a></li>
          <li><a class="nav-link" href="#siglo-xix">S. XIX</a></li>
          <li><a class="nav-link" href="#siglo-xx">S. XX</a></li>
          <li><a class="nav-link" href="#siglo-xxi">S. XXI</a></li>
          <li><a class="nav-link" href="#linea-tiempo">Línea del Tiempo</a></li>
          <li><a class="nav-link" href="#influencia-global">Influencia Global</a></li>
          <li><a class="nav-link" href="#conclusion">Conclusión</a></li>
        </ul>
      </div>
    </nav>

    <main class="container mx-auto px-6 py-10 space-y-10">
      <section id="introduccion" class="section-card reveal scroll-mt-20">
        <h2 class="text-3xl font-semibold">
          Introducción: La Madre de los Parlamentos
        </h2>
        <p class="mt-4 text-gray-700 text-justify">
          La evolución del parlamentarismo en el Reino Unido constituye un
          proceso histórico complejo que ha redefinido las relaciones entre la
          monarquía, el Parlamento y la ciudadanía. Desde la instauración de la
          Commonwealth bajo el liderazgo de Oliver Cromwell, pasando por la
          Revolución Gloriosa, las reformas electorales del siglo XIX y XX,
          hasta desafíos recientes como el Brexit y la pandemia de COVID-19, el
          modelo parlamentario británico ha experimentado profundas
          transformaciones que consolidaron su carácter representativo y su
          capacidad de adaptación institucional.
        </p>
        <p class="mt-4 text-gray-700 text-justify">
          Mediante esta línea del tiempo se ofrece una visión cronológica y
          descriptiva de los momentos que marcaron la evolución del
          parlamentarismo británico. Este recorrido no solo permite identificar
          los elementos clave de transición y reforma, sino que también revela
          cómo este sistema ha madurado, influido en otras democracias
          contemporáneas y fortalecido su legitimidad a través de los siglos.
        </p>
      </section>

      <section id="siglo-xvii-xviii" class="section-card reveal scroll-mt-20">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <h2 class="text-3xl font-semibold">
            Siglos XVII-XVIII: Cimientos y Revoluciones
          </h2>
          <span class="pill">Cimientos</span>
        </div>
        <p class="mt-4 text-gray-700 text-justify">
          El siglo XVII fue crucial, sentando las bases del parlamentarismo
          moderno. Las tensiones entre Corona y Parlamento culminaron en guerra
          civil, la ejecución de un rey, una república y la Revolución
          Gloriosa, que redefinió la constitución.
        </p>

        <div class="grid md:grid-cols-2 gap-8 mt-6">
          <div class="space-y-4">
            <h3 class="text-2xl font-semibold">Oliver Cromwell y el Parlamento</h3>
            <p class="text-gray-700 text-justify">
              La Guerra Civil Inglesa (1642-1651) forjó el poder parlamentario
              contra el absolutismo de Carlos I. Cromwell, figura central,
              lideró la ejecución del rey (1649) y la abolición de la monarquía,
              estableciendo la Commonwealth.
            </p>
            <p class="text-gray-700 text-justify">
              El Protectorado (1653) con Cromwell como Lord Protector operó
              bajo el Instrument of Government, un intento temprano de
              constitución escrita. La experiencia demostró que la monarquía no
              era invulnerable.
            </p>
          </div>
          <div class="space-y-4">
            <h3 class="text-2xl font-semibold">Revolución Gloriosa y Derechos</h3>
            <p class="text-gray-700 text-justify">
              Guillermo de Orange y María consolidaron la monarquía
              constitucional. El Bill of Rights (1689) estableció la supremacía
              del Parlamento, prohibió impuestos sin consentimiento y garantizó
              elecciones libres.
            </p>
            <div class="chart-wrap">
              <canvas id="reformActChart"></canvas>
              <p class="text-xs text-gray-500 text-center mt-2">
                Impacto hipotético de la Ley de Reforma de 1832 en el electorado.
              </p>
            </div>
          </div>
        </div>

        <div class="mt-8">
          <h3 class="text-2xl font-semibold">
            Surgimiento del Gabinete y Primer Ministro
          </h3>
          <p class="mt-3 text-gray-700 text-justify">
            La ausencia de Jorge I en reuniones de gabinete permitió que el
            ministro principal las presidiera. Sir Robert Walpole es
            considerado el primer Primer Ministro de facto, consolidando un
            ejecutivo responsable ante los Comunes.
          </p>
        </div>
      </section>
      <section id="siglo-xix" class="section-card reveal scroll-mt-20">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <h2 class="text-3xl font-semibold">Siglo XIX: Parlamento Moderno</h2>
          <span class="pill">Reformas</span>
        </div>
        <p class="mt-4 text-gray-700 text-justify">
          El siglo XIX transformó el Parlamento con reformas para hacerlo más
          representativo ante la industrialización y urbanización, ampliando el
          sufragio y consolidando el sistema de partidos.
        </p>
        <div class="grid md:grid-cols-2 gap-8 mt-6">
          <div class="space-y-4">
            <h3 class="text-2xl font-semibold">Gran Ley de 1832</h3>
            <ul class="list-disc list-inside text-gray-700 space-y-1">
              <li>Eliminó burgos podridos y redistribuyó escaños.</li>
              <li>Amplió el sufragio a la clase media masculina propietaria.</li>
              <li>Formalizó la exclusión de mujeres del voto.</li>
            </ul>
            <p class="text-gray-700 text-justify">
              Le siguieron la Segunda (1867) y Tercera (1884) Reformas,
              ampliando el sufragio masculino.
            </p>
          </div>
          <div class="space-y-4">
            <h3 class="text-2xl font-semibold">Movimiento Cartista</h3>
            <p class="text-gray-700 text-justify">
              La Carta del Pueblo (1838) exigía sufragio universal masculino,
              voto secreto y abolición del requisito de propiedad para ser MP.
              Cinco de sus seis demandas se lograron para 1918.
            </p>
            <div class="chart-wrap">
              <canvas id="labourPartyChart"></canvas>
              <p class="text-xs text-gray-500 text-center mt-2">
                Evolución ilustrativa de escaños en partidos clave.
              </p>
            </div>
          </div>
        </div>
      </section>

      <section id="siglo-xx" class="section-card reveal scroll-mt-20">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <h2 class="text-3xl font-semibold">Siglo XX: Democracia de Masas</h2>
          <span class="pill">Expansión</span>
        </div>
        <p class="mt-4 text-gray-700 text-justify">
          Guerras mundiales, sufragio universal y el ascenso del Partido
          Laborista redefinieron la relación entre Comunes y Lores y ampliaron
          el poder ejecutivo.
        </p>
        <div class="grid md:grid-cols-2 gap-8 mt-6">
          <div class="space-y-4">
            <h3 class="text-2xl font-semibold">Leyes de Parlamento</h3>
            <ul class="list-disc list-inside text-gray-700 space-y-1">
              <li>1911: fin del veto absoluto de los Lores.</li>
              <li>1949: reducción del retraso legislativo a 1 año.</li>
              <li>Consolidación de la primacía de los Comunes.</li>
            </ul>
          </div>
          <div class="space-y-4">
            <h3 class="text-2xl font-semibold">Guerras Mundiales</h3>
            <p class="text-gray-700 text-justify">
              Los conflictos fortalecieron al ejecutivo y aceleraron el declive
              del Partido Liberal. El sufragio femenino se amplió en 1918 y
              alcanzó igualdad en 1928.
            </p>
          </div>
        </div>
      </section>

      <section id="siglo-xxi" class="section-card reveal scroll-mt-20">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <h2 class="text-3xl font-semibold">Siglo XXI: Crisis y Adaptación</h2>
          <span class="pill">Actualidad</span>
        </div>
        <p class="mt-4 text-gray-700 text-justify">
          El Parlamento enfrenta desafíos como el Brexit, la polarización y la
          digitalización. Las sesiones remotas durante la pandemia mostraron
          resiliencia institucional y capacidad de reinvención.
        </p>
      </section>
      <section id="linea-tiempo" class="section-card reveal scroll-mt-20">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <h2 class="text-3xl font-semibold">Línea del Tiempo</h2>
          <span class="pill">Hitos</span>
        </div>
        <div class="timeline mt-8">
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
              <div class="flex flex-wrap items-start gap-4">
                <img
                  src="./images/1215.jpg"
                  alt="Magna Carta"
                  class="timeline-image"
                  onerror="this.onerror=null;this.src='https://placehold.co/140x100/cccccc/ffffff?text=1215';"
                />
                <div>
                  <h4 class="text-xl font-semibold text-gray-900">
                    1215 - Carta Magna
                  </h4>
                  <p class="text-gray-600 text-sm mt-2 text-justify">
                    Limitó el poder real e introdujo la idea de gobierno
                    condicionado por la ley.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
              <div class="flex flex-wrap items-start gap-4">
                <img
                  src="./images/1649.jpg"
                  alt="Commonwealth"
                  class="timeline-image"
                  onerror="this.onerror=null;this.src='https://placehold.co/140x100/cccccc/ffffff?text=1649';"
                />
                <div>
                  <h4 class="text-xl font-semibold text-gray-900">
                    1649 - Commonwealth
                  </h4>
                  <p class="text-gray-600 text-sm mt-2 text-justify">
                    Se abolió la monarquía tras la ejecución de Carlos I.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
              <div class="flex flex-wrap items-start gap-4">
                <img
                  src="./images/1689.jpg"
                  alt="Bill of Rights"
                  class="timeline-image"
                  onerror="this.onerror=null;this.src='https://placehold.co/140x100/cccccc/ffffff?text=1689';"
                />
                <div>
                  <h4 class="text-xl font-semibold text-gray-900">
                    1689 - Bill of Rights
                  </h4>
                  <p class="text-gray-600 text-sm mt-2 text-justify">
                    Supremacía parlamentaria y garantías de elecciones libres.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
              <div class="flex flex-wrap items-start gap-4">
                <img
                  src="./images/1832.jpg"
                  alt="Reforma 1832"
                  class="timeline-image"
                  onerror="this.onerror=null;this.src='https://placehold.co/140x100/cccccc/ffffff?text=1832';"
                />
                <div>
                  <h4 class="text-xl font-semibold text-gray-900">
                    1832 - Primera Reforma
                  </h4>
                  <p class="text-gray-600 text-sm mt-2 text-justify">
                    Redistribución de escaños y ampliación del sufragio.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
              <div class="flex flex-wrap items-start gap-4">
                <img
                  src="./images/1911.jpg"
                  alt="Parliament Act"
                  class="timeline-image"
                  onerror="this.onerror=null;this.src='https://placehold.co/140x100/cccccc/ffffff?text=1911';"
                />
                <div>
                  <h4 class="text-xl font-semibold text-gray-900">
                    1911 - Parliament Act
                  </h4>
                  <p class="text-gray-600 text-sm mt-2 text-justify">
                    Se limitó el veto de la Cámara de los Lores.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
              <div class="flex flex-wrap items-start gap-4">
                <img
                  src="./images/2016.jpg"
                  alt="Brexit"
                  class="timeline-image"
                  onerror="this.onerror=null;this.src='https://placehold.co/140x100/cccccc/ffffff?text=2016';"
                />
                <div>
                  <h4 class="text-xl font-semibold text-gray-900">
                    2016 - Brexit
                  </h4>
                  <p class="text-gray-600 text-sm mt-2 text-justify">
                    Tensiones entre soberanía parlamentaria y voluntad popular.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="influencia-global" class="section-card reveal scroll-mt-20">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <h2 class="text-3xl font-semibold">Influencia Global</h2>
          <span class="pill">Westminster</span>
        </div>
        <p class="mt-4 text-gray-700 text-justify">
          El modelo de Westminster ha inspirado democracias en la Commonwealth,
          adaptándose a contextos diversos con federalismo, constituciones
          escritas y nuevos equilibrios de poder.
        </p>
        <div class="flow-grid mt-6">
          <div class="flow-card">
            <h4 class="text-lg font-semibold text-gray-900">Canadá</h4>
            <p class="text-sm text-gray-600 mt-2">
              Federalismo y Carta de Derechos (1982) con revisión judicial.
            </p>
          </div>
          <div class="flow-card">
            <h4 class="text-lg font-semibold text-gray-900">Australia</h4>
            <p class="text-sm text-gray-600 mt-2">
              Senado fuerte electo y constitución rígida.
            </p>
          </div>
          <div class="flow-card">
            <h4 class="text-lg font-semibold text-gray-900">India</h4>
            <p class="text-sm text-gray-600 mt-2">
              República federal con derechos fundamentales justiciables.
            </p>
          </div>
        </div>
      </section>

      <section id="conclusion" class="section-card reveal scroll-mt-20">
        <h2 class="text-3xl font-semibold">Conclusión</h2>
        <p class="mt-4 text-gray-700 text-justify">
          El parlamentarismo británico evolucionó de tensiones monarquía-ley a
          una institución representativa y adaptable. Las reformas electorales
          y el control parlamentario consolidaron su supremacía, y las crisis
          recientes evidenciaron su capacidad para reinventarse.
        </p>
        <p class="mt-4 text-gray-700 text-justify">
          Su legado es un equilibrio dinámico entre tradición y modernidad,
          inspirando modelos constitucionales que, aunque distintos, comparten
          el hilo histórico de Westminster.
        </p>
      </section>
    </main>

    <footer class="text-center py-8 text-sm text-gray-600">
      © <span id="currentYear"></span> Línea de tiempo sobre la Evolución del
      Parlamentarismo Británico. Emmanuel M.M. 2025.
    </footer>
    <script>
      document.getElementById("currentYear").textContent =
        new Date().getFullYear();

      const navLinks = document.querySelectorAll("#sticky-nav a");
      const sections = document.querySelectorAll("main section[id]");
      const progressBar = document.getElementById("scroll-progress");
      const hero = document.querySelector(".hero");
      const prefersReducedMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      ).matches;

      const onScroll = () => {
        let currentSectionId = "";
        const navHeight =
          document.getElementById("sticky-nav")?.offsetHeight || 0;
        const scrollTop = window.scrollY || window.pageYOffset;
        const docHeight =
          document.documentElement.scrollHeight - window.innerHeight;

        if (progressBar && docHeight > 0) {
          progressBar.style.width = `${(scrollTop / docHeight) * 100}%`;
        }
        if (hero && !prefersReducedMotion) {
          const offset = Math.min(scrollTop * 0.2, 120);
          hero.style.backgroundPosition = `center calc(50% + ${offset}px)`;
        }

        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (
            scrollTop >= sectionTop - navHeight - sectionHeight * 0.15 &&
            scrollTop < sectionTop + sectionHeight - navHeight
          ) {
            currentSectionId = section.getAttribute("id");
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.getAttribute("href") === `#${currentSectionId}`) {
            link.classList.add("active");
          }
        });
      };

      const revealTargets = document.querySelectorAll(".reveal");
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.2 }
      );
      revealTargets.forEach((el, index) => {
        el.style.transitionDelay = `${Math.min(index, 8) * 70}ms`;
        observer.observe(el);
      });

      window.addEventListener("scroll", onScroll);
      document.addEventListener("DOMContentLoaded", onScroll);

      navLinks.forEach((link) => {
        link.addEventListener("click", function (e) {
          e.preventDefault();
          const targetId = this.getAttribute("href");
          const targetSection = document.querySelector(targetId);
          if (targetSection) {
            const navHeight =
              document.getElementById("sticky-nav")?.offsetHeight || 0;
            const targetPosition = targetSection.offsetTop - navHeight - 8;

            window.scrollTo({
              top: targetPosition,
              behavior: "smooth",
            });
          }
        });
      });

      const tiltTargets = document.querySelectorAll(
        ".section-card, .timeline-card, .flow-card"
      );
      tiltTargets.forEach((card) => {
        card.classList.add("tilt-card");
        card.addEventListener("mousemove", (event) => {
          if (prefersReducedMotion) return;
          const rect = card.getBoundingClientRect();
          const x = (event.clientX - rect.left) / rect.width - 0.5;
          const y = (event.clientY - rect.top) / rect.height - 0.5;
          const rotateX = (-y * 6).toFixed(2);
          const rotateY = (x * 6).toFixed(2);
          card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-2px)`;
        });
        card.addEventListener("mouseleave", () => {
          card.style.transform = "";
        });
      });

      function processLabels(labels, maxLength = 16) {
        return labels.map((label) => {
          if (typeof label === "string" && label.length > maxLength) {
            const words = label.split(" ");
            const lines = [];
            let currentLine = "";
            for (const word of words) {
              if (
                (currentLine + word).length > maxLength &&
                currentLine.length > 0
              ) {
                lines.push(currentLine.trim());
                currentLine = word + " ";
              } else {
                currentLine += word + " ";
              }
            }
            lines.push(currentLine.trim());
            return lines;
          }
          return label;
        });
      }

      const tooltipTitleCallback = {
        plugins: {
          tooltip: {
            callbacks: {
              title: function (tooltipItems) {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                  return label.join(" ");
                }
                return label;
              },
            },
          },
        },
      };

      const reformActCtx = document
        .getElementById("reformActChart")
        ?.getContext("2d");
      if (reformActCtx) {
        new Chart(reformActCtx, {
          type: "bar",
          data: {
            labels: processLabels([
              "Electorado Antes de 1832",
              "Electorado Después de 1832",
            ]),
            datasets: [
              {
                label: "Tamaño Estimado del Electorado (Inglaterra y Gales)",
                data: [435000, 652000],
                backgroundColor: ["#2F80ED", "#F05A28"],
                borderColor: ["#1F6ACC", "#D94E23"],
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value) {
                    return value / 1000 + "k";
                  },
                },
              },
            },
            ...tooltipTitleCallback,
          },
        });
      }

      const labourPartyCtx = document
        .getElementById("labourPartyChart")
        ?.getContext("2d");
      if (labourPartyCtx) {
        new Chart(labourPartyCtx, {
          type: "line",
          data: {
            labels: processLabels(["1900", "1910", "1922", "1929", "1945"]),
            datasets: [
              {
                label: "Escaños Partido Laborista (Estimación Ilustrativa)",
                data: [2, 40, 142, 287, 393],
                borderColor: "#F05A28",
                backgroundColor: "rgba(240, 90, 40, 0.2)",
                fill: true,
                tension: 0.3,
              },
              {
                label: "Escaños Partido Liberal (Estimación Ilustrativa)",
                data: [183, 272, 118, 59, 12],
                borderColor: "#2F80ED",
                backgroundColor: "rgba(47, 128, 237, 0.2)",
                fill: true,
                tension: 0.3,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
              },
            },
            ...tooltipTitleCallback,
          },
        });
      }

      const counters = document.querySelectorAll("[data-count]");
      const countObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const el = entry.target;
              const target = Number(el.getAttribute("data-count")) || 0;
              let current = 0;
              const increment = Math.max(1, Math.floor(target / 40));
              const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                  current = target;
                  clearInterval(timer);
                }
                el.textContent = current;
              }, 35);
              countObserver.unobserve(el);
            }
          });
        },
        { threshold: 0.7 }
      );
      counters.forEach((counter) => countObserver.observe(counter));
    </script>
  </body>
</html>
